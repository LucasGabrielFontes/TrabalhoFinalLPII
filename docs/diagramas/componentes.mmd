flowchart LR
  subgraph Clients[Clientes]
    C1[Cliente CLI]
    Cn[Outros Clientes]
  end
  C1 -- TCP --> NET[(Socket TCP)]
  Cn -- TCP --> NET
  subgraph Server[Chat Server]
    A[Accept Loop / Main Thread]
    SrvCore[Server Core]
    subgraph Handlers[ClientHandler Threads]
      H1[ClientHandler 1 - Thread]
      Hn[ClientHandler N - Thread]
    end
    L[TSLog Wrapper]
  end
  L --> Lib[libtslog]
  Lib --> LogFile[(logs/server.log)]
  NET --> A
  A --> SrvCore
  SrvCore <-- registra --> H1
  SrvCore <-- registra --> Hn
  H1 --> L
  Hn --> L
  A --> L